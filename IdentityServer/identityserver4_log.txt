2019-07-01 22:06:58.908 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:06:58.993 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:06:58.994 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:06:58.994 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:06:58.994 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:06:58.994 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:06:58.995 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:06:59.282 +04:30 [DBG] Starting grant removal
2019-07-01 22:07:00.036 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:07:00.041 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:07:00.041 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:07:00.041 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:07:00.041 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:07:00.041 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:07:00.041 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:08:19.567 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:08:19.705 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:08:19.706 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:08:19.706 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:08:19.707 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:08:19.707 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:08:19.707 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:08:19.931 +04:30 [DBG] Starting grant removal
2019-07-01 22:08:20.532 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:08:20.535 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:08:20.536 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:08:20.536 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:08:20.536 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:08:20.536 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:08:20.536 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:08:20.576 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:08:20.582 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:08:20.582 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:08:20.588 +04:30 [DBG] Start discovery request
2019-07-01 22:08:22.502 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:08:22.641 +04:30 [DBG] Stopping grant removal
2019-07-01 22:08:22.646 +04:30 [DBG] TaskCanceledException. Exiting.
2019-07-01 22:08:24.836 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:08:24.938 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:08:24.938 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:08:24.938 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:08:24.938 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:08:24.938 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:08:24.939 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:08:25.105 +04:30 [DBG] Starting grant removal
2019-07-01 22:08:25.481 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:08:25.485 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:08:25.485 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:08:25.485 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:08:25.485 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:08:25.485 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:08:25.485 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:08:25.520 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:08:25.525 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:08:25.526 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:08:25.531 +04:30 [DBG] Start key discovery request
2019-07-01 22:08:53.025 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:08:53.026 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:08:53.026 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:08:53.036 +04:30 [DBG] Start discovery request
2019-07-01 22:08:54.816 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:08:55.004 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:08:55.004 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:08:55.005 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:08:55.005 +04:30 [DBG] Start key discovery request
2019-07-01 22:08:58.544 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:08:58.553 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:08:58.553 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:08:58.566 +04:30 [DBG] Start token request.
2019-07-01 22:08:58.577 +04:30 [DBG] Start client validation
2019-07-01 22:08:58.587 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:08:58.595 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:08:58.621 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:08:58.621 +04:30 [DBG] Secret id found: client
2019-07-01 22:08:59.326 +04:30 [DBG] client found in database: true
2019-07-01 22:08:59.341 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 22:08:59.356 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:08:59.356 +04:30 [DBG] Client validation success
2019-07-01 22:08:59.371 +04:30 [DBG] Start token request validation
2019-07-01 22:08:59.383 +04:30 [DBG] Start client credentials token request validation
2019-07-01 22:08:59.474 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:08:59.849 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:08:59.896 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:09:00.135 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:09:00.141 +04:30 [DBG] client credentials token request validation success
2019-07-01 22:09:00.163 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:09:00.221 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 22:09:00.465 +04:30 [DBG] Token request success.
2019-07-01 22:09:16.628 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:09:16.629 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:09:16.629 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:09:16.630 +04:30 [DBG] Start discovery request
2019-07-01 22:09:16.879 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:09:17.054 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:09:17.054 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:09:17.054 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:09:17.054 +04:30 [DBG] Start key discovery request
2019-07-01 22:12:49.215 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:12:49.319 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:12:49.319 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:12:49.319 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:12:49.319 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:12:49.320 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:12:49.320 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:12:49.643 +04:30 [DBG] Starting grant removal
2019-07-01 22:12:50.155 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:12:50.159 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:12:50.159 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:12:50.159 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:12:50.159 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:12:50.159 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:12:50.159 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:13:12.097 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:13:12.105 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:13:12.105 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:13:12.114 +04:30 [DBG] Start discovery request
2019-07-01 22:13:13.236 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:13:13.396 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:13:13.397 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:13:13.397 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:13:13.402 +04:30 [DBG] Start key discovery request
2019-07-01 22:13:15.182 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:13:15.192 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:13:15.192 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:13:15.210 +04:30 [DBG] Start token request.
2019-07-01 22:13:15.229 +04:30 [DBG] Start client validation
2019-07-01 22:13:15.242 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:13:15.248 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:13:15.278 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:13:15.278 +04:30 [DBG] Secret id found: client
2019-07-01 22:13:15.964 +04:30 [DBG] client found in database: true
2019-07-01 22:13:15.974 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 22:13:15.986 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:13:15.986 +04:30 [DBG] Client validation success
2019-07-01 22:13:15.998 +04:30 [DBG] Start token request validation
2019-07-01 22:13:16.007 +04:30 [DBG] Start client credentials token request validation
2019-07-01 22:13:16.097 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:13:16.379 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:13:16.431 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:13:16.626 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:13:16.630 +04:30 [DBG] client credentials token request validation success
2019-07-01 22:13:16.646 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:13:16.683 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 22:13:16.764 +04:30 [DBG] Token request success.
2019-07-01 22:13:25.795 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:13:25.797 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:13:25.797 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:13:25.797 +04:30 [DBG] Start discovery request
2019-07-01 22:13:26.034 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:13:26.181 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:13:26.182 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:13:26.182 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:13:26.182 +04:30 [DBG] Start key discovery request
2019-07-01 22:15:58.994 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:15:59.073 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:15:59.073 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:15:59.073 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:15:59.074 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:15:59.074 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:15:59.074 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:15:59.446 +04:30 [DBG] Starting grant removal
2019-07-01 22:15:59.887 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:15:59.890 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:15:59.890 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:15:59.890 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:15:59.890 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:15:59.890 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:15:59.890 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:16:14.465 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:16:14.477 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:16:14.478 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:16:14.489 +04:30 [DBG] Start discovery request
2019-07-01 22:16:16.718 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:16:16.936 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:16:16.938 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:16:16.938 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:16:16.945 +04:30 [DBG] Start key discovery request
2019-07-01 22:16:18.263 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:16:18.277 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:16:18.277 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:16:18.292 +04:30 [DBG] Start token request.
2019-07-01 22:16:18.313 +04:30 [DBG] Start client validation
2019-07-01 22:16:18.332 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:16:18.347 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:16:18.388 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:16:18.388 +04:30 [DBG] Secret id found: client
2019-07-01 22:16:19.645 +04:30 [DBG] client found in database: true
2019-07-01 22:16:19.659 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 22:16:19.685 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:16:19.685 +04:30 [DBG] Client validation success
2019-07-01 22:16:19.702 +04:30 [DBG] Start token request validation
2019-07-01 22:16:19.712 +04:30 [DBG] Start client credentials token request validation
2019-07-01 22:16:19.814 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:16:20.107 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:16:20.160 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:16:20.427 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:16:20.431 +04:30 [DBG] client credentials token request validation success
2019-07-01 22:16:20.455 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:16:20.512 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 22:16:20.627 +04:30 [DBG] Token request success.
2019-07-01 22:34:20.100 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:34:20.267 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:34:20.268 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:34:20.268 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:34:20.268 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:34:20.268 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:34:20.268 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:34:26.204 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:34:26.281 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:34:26.281 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:34:26.281 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:34:26.281 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:34:26.281 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:34:26.282 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:34:26.394 +04:30 [DBG] Starting grant removal
2019-07-01 22:34:26.596 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:34:26.600 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:34:26.600 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:34:26.600 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:34:26.600 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:34:26.600 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:34:26.600 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:34:26.911 +04:30 [DBG] Stopping grant removal
2019-07-01 22:34:26.913 +04:30 [DBG] TaskCanceledException. Exiting.
2019-07-01 22:35:03.808 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:35:03.889 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:35:03.889 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:35:03.889 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:35:03.889 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:35:03.889 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:35:03.889 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:35:04.079 +04:30 [DBG] Starting grant removal
2019-07-01 22:35:04.612 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:35:04.617 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:35:04.617 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:35:04.617 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:35:04.617 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:35:04.617 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:35:04.617 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:35:19.591 +04:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5003
2019-07-01 22:35:19.692 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:35:19.698 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:35:19.701 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:35:19.708 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:35:19.708 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:35:19.714 +04:30 [DBG] Start discovery request
2019-07-01 22:35:20.985 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:35:21.071 +04:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 22:35:21.077 +04:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 22:35:21.077 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 22:35:21.087 +04:30 [DBG] Start authorize request
2019-07-01 22:35:21.101 +04:30 [DBG] No user present in authorize request
2019-07-01 22:35:21.109 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:35:21.945 +04:30 [DBG] js found in database: true
2019-07-01 22:35:21.954 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:35:21.962 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:35:22.225 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:35:22.800 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:35:22.993 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:35:23.364 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:35:23.379 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:35:23.405 +04:30 [INF] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript Client","RedirectUri":"http://localhost:5003/callback.html","AllowedRedirectUris":["http://localhost:5003/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"81a7d03c97394edcbd6002919cc384be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"js","redirect_uri":"http://localhost:5003/callback.html","response_type":"code","scope":"openid profile api1","state":"81a7d03c97394edcbd6002919cc384be","code_challenge":"WeTOtvVCXHIa5CzP-oHkrATflmPpn6oBnDK8DnCX4Ac","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 22:35:23.429 +04:30 [INF] Showing login: User is not authenticated
2019-07-01 22:35:23.599 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:35:24.191 +04:30 [DBG] js found in database: true
2019-07-01 22:35:24.192 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:35:24.192 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:35:24.341 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:35:24.674 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:35:24.831 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:35:25.143 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:35:25.143 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:35:25.645 +04:30 [DBG] js found in database: true
2019-07-01 22:35:25.645 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:31.648 +04:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-01 22:36:31.772 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:36:32.444 +04:30 [DBG] js found in database: true
2019-07-01 22:36:32.444 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:32.444 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:36:32.631 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:33.425 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:33.668 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:34.047 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:34.047 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:36:34.076 +04:30 [DBG] Augmenting SignInContext
2019-07-01 22:36:34.080 +04:30 [DBG] Adding idp claim with value: local
2019-07-01 22:36:34.081 +04:30 [DBG] Adding amr claim with value: pwd
2019-07-01 22:36:34.104 +04:30 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 22:36:34.755 +04:30 [DBG] js found in database: true
2019-07-01 22:36:34.755 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:34.836 +04:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 22:36:34.838 +04:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 22:36:34.838 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 22:36:34.848 +04:30 [DBG] Start authorize callback request
2019-07-01 22:36:34.854 +04:30 [DBG] User in authorize request: 1
2019-07-01 22:36:34.854 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:36:35.373 +04:30 [DBG] js found in database: true
2019-07-01 22:36:35.373 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:35.373 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:36:35.487 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:35.690 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:35.792 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:36.008 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:36.008 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:36:36.008 +04:30 [INF] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript Client","RedirectUri":"http://localhost:5003/callback.html","AllowedRedirectUris":["http://localhost:5003/callback.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"81a7d03c97394edcbd6002919cc384be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5ebb00f99ca602595fa0a763f7e30d7f","Raw":{"client_id":"js","redirect_uri":"http://localhost:5003/callback.html","response_type":"code","scope":"openid profile api1","state":"81a7d03c97394edcbd6002919cc384be","code_challenge":"WeTOtvVCXHIa5CzP-oHkrATflmPpn6oBnDK8DnCX4Ac","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 22:36:36.010 +04:30 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 22:36:36.086 +04:30 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: false
2019-07-01 22:36:36.086 +04:30 [DBG] user_consent grant with value: js|1 not found in store.
2019-07-01 22:36:36.086 +04:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 22:36:36.086 +04:30 [INF] Showing consent: User has not yet consented
2019-07-01 22:36:36.167 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:36:36.698 +04:30 [DBG] js found in database: true
2019-07-01 22:36:36.698 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:36.698 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:36:36.855 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:37.163 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:37.324 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:37.641 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:36:37.642 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:36:38.153 +04:30 [DBG] js found in database: true
2019-07-01 22:36:38.153 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:36:38.309 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:36:38.599 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:37:29.581 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:37:29.757 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:37:29.757 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:37:29.758 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:37:29.758 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:37:29.758 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:37:29.758 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:37:30.340 +04:30 [DBG] Starting grant removal
2019-07-01 22:37:31.309 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:37:31.315 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:37:31.316 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:37:31.316 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:37:31.316 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:37:31.317 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:37:31.317 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:38:07.226 +04:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5003
2019-07-01 22:38:07.378 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:38:07.386 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:38:07.389 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:38:07.396 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:38:07.397 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:38:07.403 +04:30 [DBG] Start discovery request
2019-07-01 22:38:09.519 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:38:09.659 +04:30 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 22:38:09.666 +04:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 22:38:09.669 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 22:38:09.683 +04:30 [DBG] Start authorize request
2019-07-01 22:38:09.718 +04:30 [DBG] No user present in authorize request
2019-07-01 22:38:09.732 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:38:11.215 +04:30 [DBG] js found in database: true
2019-07-01 22:38:11.235 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:38:11.257 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:38:11.575 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:38:12.349 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:38:12.513 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:38:12.848 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:38:12.862 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:38:12.882 +04:30 [INF] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript Client","RedirectUri":"http://localhost:5003/callback.html","AllowedRedirectUris":["http://localhost:5003/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"9c46eaa93d6f4c6da4532dee99f0001e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"js","redirect_uri":"http://localhost:5003/callback.html","response_type":"code","scope":"openid profile api1","state":"9c46eaa93d6f4c6da4532dee99f0001e","code_challenge":"Qi7BdflrZgAUEPugo3yEoiI3rk5tRPKUsUiXf8h1Wj8","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 22:38:12.902 +04:30 [INF] Showing login: User is not authenticated
2019-07-01 22:38:13.057 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:38:14.174 +04:30 [DBG] js found in database: true
2019-07-01 22:38:14.174 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:38:14.175 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:38:14.548 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:38:15.115 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:38:15.345 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:38:15.678 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:38:15.678 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:38:16.223 +04:30 [DBG] js found in database: true
2019-07-01 22:38:16.223 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:15.695 +04:30 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-01 22:39:15.792 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:39:16.352 +04:30 [DBG] js found in database: true
2019-07-01 22:39:16.352 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:16.353 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:39:16.505 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:16.915 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:17.063 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:17.377 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:17.378 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:39:17.412 +04:30 [DBG] Augmenting SignInContext
2019-07-01 22:39:17.417 +04:30 [DBG] Adding idp claim with value: local
2019-07-01 22:39:17.417 +04:30 [DBG] Adding amr claim with value: pwd
2019-07-01 22:39:17.438 +04:30 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 22:39:17.919 +04:30 [DBG] js found in database: true
2019-07-01 22:39:17.919 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:17.972 +04:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 22:39:17.973 +04:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 22:39:17.973 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 22:39:17.983 +04:30 [DBG] Start authorize callback request
2019-07-01 22:39:17.992 +04:30 [DBG] User in authorize request: 1
2019-07-01 22:39:17.992 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:39:18.338 +04:30 [DBG] js found in database: true
2019-07-01 22:39:18.339 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:18.339 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:39:18.458 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:18.661 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:18.784 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:19.003 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:19.003 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:39:19.003 +04:30 [INF] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript Client","RedirectUri":"http://localhost:5003/callback.html","AllowedRedirectUris":["http://localhost:5003/callback.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"9c46eaa93d6f4c6da4532dee99f0001e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b32257fbd1b36084f0de3a89c451423e","Raw":{"client_id":"js","redirect_uri":"http://localhost:5003/callback.html","response_type":"code","scope":"openid profile api1","state":"9c46eaa93d6f4c6da4532dee99f0001e","code_challenge":"Qi7BdflrZgAUEPugo3yEoiI3rk5tRPKUsUiXf8h1Wj8","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 22:39:19.005 +04:30 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 22:39:19.090 +04:30 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: false
2019-07-01 22:39:19.090 +04:30 [DBG] user_consent grant with value: js|1 not found in store.
2019-07-01 22:39:19.090 +04:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 22:39:19.091 +04:30 [INF] Showing consent: User has not yet consented
2019-07-01 22:39:19.159 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:39:19.709 +04:30 [DBG] js found in database: true
2019-07-01 22:39:19.710 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:19.710 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:39:19.855 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:20.162 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:20.320 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:20.696 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:20.697 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:39:21.222 +04:30 [DBG] js found in database: true
2019-07-01 22:39:21.222 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:21.352 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:21.628 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:29.812 +04:30 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-01 22:39:29.878 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:39:30.465 +04:30 [DBG] js found in database: true
2019-07-01 22:39:30.465 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:30.465 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:39:30.619 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:30.991 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:31.184 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:31.503 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:31.504 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:39:32.031 +04:30 [DBG] js found in database: true
2019-07-01 22:39:32.031 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:32.210 +04:30 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 22:39:32.211 +04:30 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 22:39:32.211 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 22:39:32.211 +04:30 [DBG] Start authorize callback request
2019-07-01 22:39:32.220 +04:30 [DBG] User in authorize request: 1
2019-07-01 22:39:32.220 +04:30 [DBG] Start authorize request protocol validation
2019-07-01 22:39:32.604 +04:30 [DBG] js found in database: true
2019-07-01 22:39:32.604 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:32.604 +04:30 [DBG] Checking for PKCE parameters
2019-07-01 22:39:32.709 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:32.908 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:33.004 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:33.213 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:33.213 +04:30 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 22:39:33.213 +04:30 [INF] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript Client","RedirectUri":"http://localhost:5003/callback.html","AllowedRedirectUris":["http://localhost:5003/callback.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"9c46eaa93d6f4c6da4532dee99f0001e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b32257fbd1b36084f0de3a89c451423e","Raw":{"client_id":"js","redirect_uri":"http://localhost:5003/callback.html","response_type":"code","scope":"openid profile api1","state":"9c46eaa93d6f4c6da4532dee99f0001e","code_challenge":"Qi7BdflrZgAUEPugo3yEoiI3rk5tRPKUsUiXf8h1Wj8","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 22:39:33.213 +04:30 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 22:39:33.249 +04:30 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: false
2019-07-01 22:39:33.250 +04:30 [DBG] user_consent grant with value: js|1 not found in store.
2019-07-01 22:39:33.250 +04:30 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 22:39:33.261 +04:30 [INF] User consented to scopes: ["openid","profile","api1"]
2019-07-01 22:39:33.263 +04:30 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1"]
2019-07-01 22:39:33.269 +04:30 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2019-07-01 22:39:33.335 +04:30 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= not found in database
2019-07-01 22:39:33.446 +04:30 [DBG] Creating Authorization Code Flow response.
2019-07-01 22:39:33.519 +04:30 [DBG] EE9Ld3H6jYcdA4HLZ37VjRMyR2EB7nDbDGk0qPm4cyI= not found in database
2019-07-01 22:39:33.561 +04:30 [INF] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:5003/callback.html","State":"9c46eaa93d6f4c6da4532dee99f0001e","Scope":"openid profile api1","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-01 22:39:33.587 +04:30 [DBG] Augmenting SignInContext
2019-07-01 22:39:33.590 +04:30 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 22:39:40.488 +04:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5003
2019-07-01 22:39:40.523 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:39:40.523 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:39:40.524 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:39:40.524 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:39:40.524 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:39:40.524 +04:30 [DBG] Start discovery request
2019-07-01 22:39:40.819 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:39:40.831 +04:30 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5003
2019-07-01 22:39:40.858 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:39:40.858 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:39:40.858 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:39:40.867 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:39:40.867 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:39:40.879 +04:30 [DBG] Start token request.
2019-07-01 22:39:40.890 +04:30 [DBG] Start client validation
2019-07-01 22:39:40.898 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:39:40.906 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:39:40.907 +04:30 [DBG] client id without secret found
2019-07-01 22:39:40.908 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:39:40.908 +04:30 [DBG] Secret id found: js
2019-07-01 22:39:41.276 +04:30 [DBG] js found in database: true
2019-07-01 22:39:41.276 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:41.276 +04:30 [DBG] Public Client - skipping secret validation success
2019-07-01 22:39:41.276 +04:30 [DBG] Client validation success
2019-07-01 22:39:41.286 +04:30 [DBG] Start token request validation
2019-07-01 22:39:41.305 +04:30 [DBG] Start validation of authorization code token request
2019-07-01 22:39:41.371 +04:30 [DBG] EE9Ld3H6jYcdA4HLZ37VjRMyR2EB7nDbDGk0qPm4cyI= found in database: true
2019-07-01 22:39:41.498 +04:30 [DBG] removing EE9Ld3H6jYcdA4HLZ37VjRMyR2EB7nDbDGk0qPm4cyI= persisted grant from database
2019-07-01 22:39:41.708 +04:30 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2019-07-01 22:39:41.712 +04:30 [DBG] IsActive called from: AuthorizationCodeValidation
2019-07-01 22:39:41.713 +04:30 [DBG] Validation of authorization code token request success
2019-07-01 22:39:41.719 +04:30 [INF] Token request validation success
{"ClientId":"js","ClientName":"JavaScript Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"281a5942ab14fed0710b0a911fca9760439be8324967194b904d122d403f40ab","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","code":"281a5942ab14fed0710b0a911fca9760439be8324967194b904d122d403f40ab","redirect_uri":"http://localhost:5003/callback.html","code_verifier":"8ec798fe1b9549a79cb1d68c0fea182be96afdce798b4b499baa9c9758200daf412503e6a23549708027829741ede81a","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:39:42.191 +04:30 [DBG] js found in database: true
2019-07-01 22:39:42.191 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:42.294 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:42.551 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:42.570 +04:30 [DBG] Getting claims for access token for client: js
2019-07-01 22:39:42.570 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 22:39:42.577 +04:30 [DBG] Get profile called for subject 1 from client JavaScript Client with claim types [] via ClaimsProviderAccessToken
2019-07-01 22:39:42.579 +04:30 [DBG] Issued claims: []
2019-07-01 22:39:43.077 +04:30 [DBG] js found in database: true
2019-07-01 22:39:43.077 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:43.177 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:43.437 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:39:43.450 +04:30 [DBG] Getting claims for identity token for subject: 1 and client: js
2019-07-01 22:39:43.450 +04:30 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-07-01 22:39:43.457 +04:30 [DBG] Token request success.
2019-07-01 22:39:43.476 +04:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5003
2019-07-01 22:39:43.505 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:39:43.505 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:39:43.512 +04:30 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5003
2019-07-01 22:39:43.536 +04:30 [DBG] Origin http://localhost:5003 is allowed: true
2019-07-01 22:39:43.536 +04:30 [DBG] CorsPolicyService allowed origin: http://localhost:5003
2019-07-01 22:39:43.536 +04:30 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-07-01 22:39:43.538 +04:30 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-07-01 22:39:43.538 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-07-01 22:39:43.547 +04:30 [DBG] Start userinfo request
2019-07-01 22:39:43.552 +04:30 [DBG] Bearer token found in header
2019-07-01 22:39:44.073 +04:30 [DBG] js found in database: true
2019-07-01 22:39:44.073 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:44.425 +04:30 [DBG] js found in database: true
2019-07-01 22:39:44.425 +04:30 [DBG] client configuration validation for client js succeeded.
2019-07-01 22:39:44.426 +04:30 [DBG] IsActive called from: AccessTokenValidation
2019-07-01 22:39:44.426 +04:30 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-01 22:39:44.429 +04:30 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562004582,"exp":1562008182,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"js","sub":"1","auth_time":1562004557,"idp":"local","scope":["openid","profile","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-07-01 22:39:44.431 +04:30 [DBG] IsActive called from: UserInfoRequestValidation
2019-07-01 22:39:44.441 +04:30 [DBG] Creating userinfo response
2019-07-01 22:39:44.448 +04:30 [DBG] Scopes in access token: openid profile api1
2019-07-01 22:39:44.452 +04:30 [DBG] Scopes in access token: openid profile api1
2019-07-01 22:39:44.557 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:44.558 +04:30 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-07-01 22:39:44.559 +04:30 [DBG] Scopes in access token: openid profile api1
2019-07-01 22:39:44.650 +04:30 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 22:39:44.650 +04:30 [DBG] Get profile called for subject 1 from client JavaScript Client with claim types ["sub","name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via UserInfoEndpoint
2019-07-01 22:39:44.653 +04:30 [DBG] Issued claims: ["name","website"]
2019-07-01 22:39:44.653 +04:30 [INF] Profile service returned the following claim types: name website
2019-07-01 22:39:44.653 +04:30 [DBG] End userinfo request
2019-07-01 22:39:44.694 +04:30 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2019-07-01 22:39:44.695 +04:30 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2019-07-01 22:39:44.695 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2019-07-01 22:39:44.697 +04:30 [DBG] Rendering check session result
2019-07-01 22:39:45.328 +04:30 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5003
2019-07-01 22:46:47.223 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 22:46:47.328 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 22:46:47.329 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 22:46:47.329 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 22:46:47.329 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 22:46:47.329 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 22:46:47.329 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 22:46:47.573 +04:30 [DBG] Starting grant removal
2019-07-01 22:46:48.056 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 22:46:48.062 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 22:46:48.063 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 22:46:48.063 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 22:46:48.063 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 22:46:48.063 +04:30 [DBG] Error Url: /home/error
2019-07-01 22:46:48.063 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 22:47:22.327 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:47:22.341 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:47:22.341 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:47:22.368 +04:30 [DBG] Start discovery request
2019-07-01 22:47:23.563 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:47:23.813 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:47:23.815 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:47:23.815 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:47:23.820 +04:30 [DBG] Start key discovery request
2019-07-01 22:47:25.847 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:47:25.858 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:47:25.858 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:47:25.873 +04:30 [DBG] Start token request.
2019-07-01 22:47:25.884 +04:30 [DBG] Start client validation
2019-07-01 22:47:25.891 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:47:25.897 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:47:25.922 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:47:25.922 +04:30 [DBG] Secret id found: client
2019-07-01 22:47:26.732 +04:30 [DBG] client found in database: true
2019-07-01 22:47:26.744 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 22:47:26.759 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:47:26.760 +04:30 [DBG] Client validation success
2019-07-01 22:47:26.779 +04:30 [DBG] Start token request validation
2019-07-01 22:47:26.792 +04:30 [DBG] Start client credentials token request validation
2019-07-01 22:47:26.914 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:47:27.224 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:47:27.268 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:47:27.465 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:47:27.469 +04:30 [DBG] client credentials token request validation success
2019-07-01 22:47:27.490 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:47:27.523 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 22:47:27.614 +04:30 [DBG] Token request success.
2019-07-01 22:47:28.513 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:47:28.515 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:47:28.515 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:47:28.515 +04:30 [DBG] Start token request.
2019-07-01 22:47:28.515 +04:30 [DBG] Start client validation
2019-07-01 22:47:28.515 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:47:28.515 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:47:28.517 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:47:28.517 +04:30 [DBG] Secret id found: ro.client
2019-07-01 22:47:28.893 +04:30 [DBG] ro.client found in database: true
2019-07-01 22:47:28.893 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 22:47:28.893 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:47:28.894 +04:30 [DBG] Client validation success
2019-07-01 22:47:28.894 +04:30 [DBG] Start token request validation
2019-07-01 22:47:28.906 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 22:47:28.943 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:47:29.148 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:47:29.179 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:47:29.402 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:47:29.410 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 22:47:29.413 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 22:47:29.413 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:47:29.414 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 22:47:29.415 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 22:47:29.421 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 22:47:29.423 +04:30 [DBG] Issued claims: []
2019-07-01 22:47:29.431 +04:30 [DBG] Token request success.
2019-07-01 22:48:33.337 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:48:33.338 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:48:33.338 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:48:33.338 +04:30 [DBG] Start discovery request
2019-07-01 22:48:33.656 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:48:33.773 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:48:33.773 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:48:33.773 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:48:33.774 +04:30 [DBG] Start key discovery request
2019-07-01 22:48:35.894 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:48:35.894 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:48:35.894 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:48:35.895 +04:30 [DBG] Start token request.
2019-07-01 22:48:35.895 +04:30 [DBG] Start client validation
2019-07-01 22:48:35.896 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:48:35.896 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:48:35.897 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:48:35.897 +04:30 [DBG] Secret id found: client
2019-07-01 22:48:36.268 +04:30 [DBG] client found in database: true
2019-07-01 22:48:36.268 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 22:48:36.268 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:48:36.268 +04:30 [DBG] Client validation success
2019-07-01 22:48:36.268 +04:30 [DBG] Start token request validation
2019-07-01 22:48:36.268 +04:30 [DBG] Start client credentials token request validation
2019-07-01 22:48:36.301 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:48:36.545 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:48:36.581 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:48:36.813 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:48:36.813 +04:30 [DBG] client credentials token request validation success
2019-07-01 22:48:36.813 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:48:36.813 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 22:48:36.818 +04:30 [DBG] Token request success.
2019-07-01 22:48:37.705 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 22:48:37.705 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 22:48:37.706 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 22:48:37.706 +04:30 [DBG] Start token request.
2019-07-01 22:48:37.706 +04:30 [DBG] Start client validation
2019-07-01 22:48:37.706 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 22:48:37.706 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 22:48:37.712 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 22:48:37.712 +04:30 [DBG] Secret id found: ro.client
2019-07-01 22:48:38.060 +04:30 [DBG] ro.client found in database: true
2019-07-01 22:48:38.061 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 22:48:38.061 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 22:48:38.061 +04:30 [DBG] Client validation success
2019-07-01 22:48:38.061 +04:30 [DBG] Start token request validation
2019-07-01 22:48:38.061 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 22:48:38.097 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:48:38.334 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:48:38.365 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 22:48:38.563 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 22:48:38.564 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 22:48:38.564 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 22:48:38.564 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 22:48:38.564 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 22:48:38.564 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 22:48:38.565 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 22:48:38.565 +04:30 [DBG] Issued claims: []
2019-07-01 22:48:38.569 +04:30 [DBG] Token request success.
2019-07-01 22:48:49.081 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 22:48:49.083 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 22:48:49.087 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 22:48:49.089 +04:30 [DBG] Start discovery request
2019-07-01 22:48:49.430 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 22:48:49.758 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 22:48:49.759 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 22:48:49.760 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 22:48:49.760 +04:30 [DBG] Start key discovery request
2019-07-01 23:16:43.054 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 23:16:43.155 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 23:16:43.155 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 23:16:43.155 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 23:16:43.155 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 23:16:43.156 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 23:16:43.156 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 23:16:43.362 +04:30 [DBG] Starting grant removal
2019-07-01 23:16:43.851 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 23:16:43.855 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 23:16:43.856 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 23:16:43.856 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 23:16:43.856 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 23:16:43.856 +04:30 [DBG] Error Url: /home/error
2019-07-01 23:16:43.856 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 23:18:13.973 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:18:13.980 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:18:13.981 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:18:13.990 +04:30 [DBG] Start discovery request
2019-07-01 23:18:15.213 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:18:15.393 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:18:15.394 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:18:15.394 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:18:15.399 +04:30 [DBG] Start key discovery request
2019-07-01 23:18:17.630 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:18:17.640 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:18:17.641 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:18:17.654 +04:30 [DBG] Start token request.
2019-07-01 23:18:17.666 +04:30 [DBG] Start client validation
2019-07-01 23:18:17.680 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:18:17.687 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:18:17.713 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:18:17.713 +04:30 [DBG] Secret id found: client
2019-07-01 23:18:18.475 +04:30 [DBG] client found in database: true
2019-07-01 23:18:18.488 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 23:18:18.500 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:18:18.500 +04:30 [DBG] Client validation success
2019-07-01 23:18:18.514 +04:30 [DBG] Start token request validation
2019-07-01 23:18:18.524 +04:30 [DBG] Start client credentials token request validation
2019-07-01 23:18:18.638 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:19.001 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:19.052 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:19.260 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:19.266 +04:30 [DBG] client credentials token request validation success
2019-07-01 23:18:19.287 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:18:19.327 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 23:18:19.427 +04:30 [DBG] Token request success.
2019-07-01 23:18:21.167 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:18:21.181 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:18:21.182 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:18:21.182 +04:30 [DBG] Start token request.
2019-07-01 23:18:21.182 +04:30 [DBG] Start client validation
2019-07-01 23:18:21.182 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:18:21.182 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:18:21.183 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:18:21.184 +04:30 [DBG] Secret id found: ro.client
2019-07-01 23:18:21.577 +04:30 [DBG] ro.client found in database: true
2019-07-01 23:18:21.577 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 23:18:21.578 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:18:21.578 +04:30 [DBG] Client validation success
2019-07-01 23:18:21.579 +04:30 [DBG] Start token request validation
2019-07-01 23:18:21.593 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 23:18:21.632 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:21.852 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:21.883 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:22.078 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:22.085 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 23:18:22.086 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 23:18:22.086 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:18:22.087 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 23:18:22.087 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 23:18:22.093 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 23:18:22.095 +04:30 [DBG] Issued claims: []
2019-07-01 23:18:22.102 +04:30 [DBG] Token request success.
2019-07-01 23:18:56.302 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:18:56.303 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:18:56.303 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:18:56.303 +04:30 [DBG] Start discovery request
2019-07-01 23:18:56.578 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:18:56.697 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:18:56.698 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:18:56.698 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:18:56.698 +04:30 [DBG] Start key discovery request
2019-07-01 23:18:58.875 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:18:58.877 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:18:58.877 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:18:58.878 +04:30 [DBG] Start token request.
2019-07-01 23:18:58.878 +04:30 [DBG] Start client validation
2019-07-01 23:18:58.878 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:18:58.878 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:18:58.878 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:18:58.878 +04:30 [DBG] Secret id found: client
2019-07-01 23:18:59.278 +04:30 [DBG] client found in database: true
2019-07-01 23:18:59.278 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 23:18:59.278 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:18:59.278 +04:30 [DBG] Client validation success
2019-07-01 23:18:59.278 +04:30 [DBG] Start token request validation
2019-07-01 23:18:59.279 +04:30 [DBG] Start client credentials token request validation
2019-07-01 23:18:59.315 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:59.593 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:59.628 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:18:59.864 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:18:59.864 +04:30 [DBG] client credentials token request validation success
2019-07-01 23:18:59.865 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:18:59.865 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 23:18:59.869 +04:30 [DBG] Token request success.
2019-07-01 23:19:00.652 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:19:00.653 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:19:00.653 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:19:00.653 +04:30 [DBG] Start token request.
2019-07-01 23:19:00.653 +04:30 [DBG] Start client validation
2019-07-01 23:19:00.653 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:19:00.653 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:19:00.654 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:19:00.654 +04:30 [DBG] Secret id found: ro.client
2019-07-01 23:19:01.069 +04:30 [DBG] ro.client found in database: true
2019-07-01 23:19:01.069 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 23:19:01.069 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:19:01.069 +04:30 [DBG] Client validation success
2019-07-01 23:19:01.069 +04:30 [DBG] Start token request validation
2019-07-01 23:19:01.069 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 23:19:01.109 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:19:01.364 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:19:01.394 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:19:01.597 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:19:01.597 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 23:19:01.597 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 23:19:01.597 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:19:01.597 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 23:19:01.598 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 23:19:01.598 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 23:19:01.598 +04:30 [DBG] Issued claims: []
2019-07-01 23:19:01.603 +04:30 [DBG] Token request success.
2019-07-01 23:19:08.516 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:19:08.517 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:19:08.517 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:19:08.517 +04:30 [DBG] Start discovery request
2019-07-01 23:19:08.759 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:19:08.943 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:19:08.944 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:19:08.944 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:19:08.944 +04:30 [DBG] Start key discovery request
2019-07-01 23:22:24.803 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 23:22:24.888 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 23:22:24.888 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 23:22:24.888 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 23:22:24.888 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 23:22:24.888 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 23:22:24.888 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 23:22:25.091 +04:30 [DBG] Starting grant removal
2019-07-01 23:22:25.490 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 23:22:25.495 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 23:22:25.495 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 23:22:25.496 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 23:22:25.496 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 23:22:25.496 +04:30 [DBG] Error Url: /home/error
2019-07-01 23:22:25.496 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 23:22:40.144 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:22:40.152 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:22:40.152 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:22:40.159 +04:30 [DBG] Start discovery request
2019-07-01 23:22:40.840 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:22:41.026 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:22:41.027 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:22:41.028 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:22:41.034 +04:30 [DBG] Start key discovery request
2019-07-01 23:22:44.074 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:22:44.084 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:22:44.084 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:22:44.095 +04:30 [DBG] Start token request.
2019-07-01 23:22:44.106 +04:30 [DBG] Start client validation
2019-07-01 23:22:44.119 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:22:44.125 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:22:44.153 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:22:44.153 +04:30 [DBG] Secret id found: client
2019-07-01 23:22:44.837 +04:30 [DBG] client found in database: true
2019-07-01 23:22:44.848 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 23:22:44.859 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:22:44.859 +04:30 [DBG] Client validation success
2019-07-01 23:22:44.871 +04:30 [DBG] Start token request validation
2019-07-01 23:22:44.883 +04:30 [DBG] Start client credentials token request validation
2019-07-01 23:22:44.977 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:22:45.359 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:22:45.412 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:22:45.634 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:22:45.639 +04:30 [DBG] client credentials token request validation success
2019-07-01 23:22:45.655 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:22:45.696 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 23:22:45.783 +04:30 [DBG] Token request success.
2019-07-01 23:22:46.773 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:22:46.773 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:22:46.773 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:22:46.774 +04:30 [DBG] Start token request.
2019-07-01 23:22:46.774 +04:30 [DBG] Start client validation
2019-07-01 23:22:46.774 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:22:46.774 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:22:46.775 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:22:46.775 +04:30 [DBG] Secret id found: ro.client
2019-07-01 23:22:47.144 +04:30 [DBG] ro.client found in database: true
2019-07-01 23:22:47.144 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 23:22:47.145 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:22:47.145 +04:30 [DBG] Client validation success
2019-07-01 23:22:47.145 +04:30 [DBG] Start token request validation
2019-07-01 23:22:47.158 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 23:22:47.195 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:22:47.404 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:22:47.447 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:22:47.650 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:22:47.657 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 23:22:47.666 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 23:22:47.666 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:22:47.667 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 23:22:47.667 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 23:22:47.674 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 23:22:47.676 +04:30 [DBG] Issued claims: []
2019-07-01 23:22:47.682 +04:30 [DBG] Token request success.
2019-07-01 23:22:52.873 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:22:52.873 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:22:52.873 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:22:52.874 +04:30 [DBG] Start discovery request
2019-07-01 23:22:53.137 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:22:53.295 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:22:53.295 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:22:53.295 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:22:53.295 +04:30 [DBG] Start key discovery request
2019-07-01 23:23:59.734 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-01 23:23:59.840 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 23:23:59.840 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 23:23:59.840 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 23:23:59.841 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 23:23:59.841 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 23:23:59.841 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 23:24:00.058 +04:30 [DBG] Starting grant removal
2019-07-01 23:24:00.594 +04:30 [DBG] Login Url: /Account/Login
2019-07-01 23:24:00.602 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 23:24:00.603 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-01 23:24:00.603 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-01 23:24:00.603 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 23:24:00.603 +04:30 [DBG] Error Url: /home/error
2019-07-01 23:24:00.603 +04:30 [DBG] Error Id Parameter: errorId
2019-07-01 23:24:15.906 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:24:15.914 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:24:15.914 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:24:15.920 +04:30 [DBG] Start discovery request
2019-07-01 23:24:16.621 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:24:16.828 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:24:16.829 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:24:16.830 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:24:16.837 +04:30 [DBG] Start key discovery request
2019-07-01 23:24:17.911 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:24:17.923 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:24:17.923 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:24:17.936 +04:30 [DBG] Start token request.
2019-07-01 23:24:17.949 +04:30 [DBG] Start client validation
2019-07-01 23:24:17.961 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:24:17.971 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:24:18.014 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:24:18.015 +04:30 [DBG] Secret id found: client
2019-07-01 23:24:18.585 +04:30 [DBG] client found in database: true
2019-07-01 23:24:18.596 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-01 23:24:18.609 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:24:18.609 +04:30 [DBG] Client validation success
2019-07-01 23:24:18.624 +04:30 [DBG] Start token request validation
2019-07-01 23:24:18.635 +04:30 [DBG] Start client credentials token request validation
2019-07-01 23:24:18.728 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:24:19.085 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:24:19.129 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:24:19.352 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:24:19.356 +04:30 [DBG] client credentials token request validation success
2019-07-01 23:24:19.372 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:24:19.405 +04:30 [DBG] Getting claims for access token for client: client
2019-07-01 23:24:19.489 +04:30 [DBG] Token request success.
2019-07-01 23:24:20.010 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-01 23:24:20.011 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-01 23:24:20.011 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-01 23:24:20.012 +04:30 [DBG] Start token request.
2019-07-01 23:24:20.012 +04:30 [DBG] Start client validation
2019-07-01 23:24:20.013 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-01 23:24:20.013 +04:30 [DBG] Start parsing for secret in post body
2019-07-01 23:24:20.013 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-01 23:24:20.014 +04:30 [DBG] Secret id found: ro.client
2019-07-01 23:24:20.350 +04:30 [DBG] ro.client found in database: true
2019-07-01 23:24:20.351 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-01 23:24:20.351 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-01 23:24:20.351 +04:30 [DBG] Client validation success
2019-07-01 23:24:20.351 +04:30 [DBG] Start token request validation
2019-07-01 23:24:20.363 +04:30 [DBG] Start resource owner password token request validation
2019-07-01 23:24:20.398 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:24:20.598 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:24:20.630 +04:30 [DBG] Found [] identity scopes in database
2019-07-01 23:24:20.882 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-01 23:24:20.890 +04:30 [DBG] IsActive called from: ResourceOwnerValidation
2019-07-01 23:24:20.891 +04:30 [DBG] Resource owner password token request validation success.
2019-07-01 23:24:20.892 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-01 23:24:20.892 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-01 23:24:20.892 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-01 23:24:20.900 +04:30 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-07-01 23:24:20.902 +04:30 [DBG] Issued claims: []
2019-07-01 23:24:20.911 +04:30 [DBG] Token request success.
2019-07-01 23:24:24.305 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 23:24:24.306 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 23:24:24.306 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 23:24:24.306 +04:30 [DBG] Start discovery request
2019-07-01 23:24:24.548 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-01 23:24:24.732 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 23:24:24.733 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 23:24:24.733 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 23:24:24.733 +04:30 [DBG] Start key discovery request
2019-07-02 21:27:40.743 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:27:40.832 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:27:40.832 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:27:40.833 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:27:40.833 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:27:40.833 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:27:40.833 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:27:41.043 +04:30 [DBG] Starting grant removal
2019-07-02 21:27:41.427 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:27:41.432 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:27:41.432 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:27:41.432 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:27:41.432 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:27:41.432 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:27:41.432 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:28:58.242 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:28:58.251 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:28:58.251 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:28:58.261 +04:30 [DBG] Start discovery request
2019-07-02 21:28:58.841 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:28:59.030 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:28:59.031 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:28:59.031 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:28:59.037 +04:30 [DBG] Start key discovery request
2019-07-02 21:29:02.046 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:29:02.055 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:29:02.055 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:29:02.067 +04:30 [DBG] Start token request.
2019-07-02 21:29:02.079 +04:30 [DBG] Start client validation
2019-07-02 21:29:02.089 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:29:02.095 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:29:02.120 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:29:02.120 +04:30 [DBG] Secret id found: client
2019-07-02 21:29:02.698 +04:30 [DBG] client found in database: true
2019-07-02 21:29:02.708 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 21:29:02.719 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:29:02.719 +04:30 [DBG] Client validation success
2019-07-02 21:29:02.732 +04:30 [DBG] Start token request validation
2019-07-02 21:29:02.741 +04:30 [DBG] Start client credentials token request validation
2019-07-02 21:29:02.829 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:29:03.183 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:29:03.241 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:29:03.442 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:29:03.446 +04:30 [DBG] client credentials token request validation success
2019-07-02 21:29:03.462 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:29:03.497 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 21:29:03.581 +04:30 [DBG] Token request success.
2019-07-02 21:29:04.965 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:29:04.969 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:29:04.969 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:29:04.970 +04:30 [DBG] Start token request.
2019-07-02 21:29:04.970 +04:30 [DBG] Start client validation
2019-07-02 21:29:04.970 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:29:04.971 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:29:04.973 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:29:04.973 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:29:05.345 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:29:05.346 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:29:05.346 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:29:05.346 +04:30 [DBG] Client validation success
2019-07-02 21:29:05.346 +04:30 [DBG] Start token request validation
2019-07-02 21:29:05.358 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:29:05.395 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:29:05.604 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:29:05.604 +04:30 [ERR] Requested scope not allowed: api1
2019-07-02 21:29:05.606 +04:30 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:30:43.431 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:30:43.515 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:30:43.515 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:30:43.515 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:30:43.515 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:30:43.515 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:30:43.516 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:30:43.711 +04:30 [DBG] Starting grant removal
2019-07-02 21:30:44.083 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:30:44.088 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:30:44.088 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:30:44.088 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:30:44.089 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:30:44.089 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:30:44.090 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:33:58.624 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:33:58.694 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:33:58.694 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:33:58.695 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:33:58.695 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:33:58.695 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:33:58.695 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:33:58.843 +04:30 [DBG] Starting grant removal
2019-07-02 21:33:59.394 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:33:59.396 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:33:59.396 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:33:59.396 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:33:59.396 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:33:59.396 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:33:59.396 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:34:25.138 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:34:25.146 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:34:25.146 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:34:25.153 +04:30 [DBG] Start discovery request
2019-07-02 21:34:26.348 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:34:26.624 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:34:26.625 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:34:26.625 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:34:26.635 +04:30 [DBG] Start key discovery request
2019-07-02 21:34:29.436 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:34:29.443 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:34:29.443 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:34:29.453 +04:30 [DBG] Start token request.
2019-07-02 21:34:29.461 +04:30 [DBG] Start client validation
2019-07-02 21:34:29.470 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:34:29.471 +04:30 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-07-02 21:34:29.471 +04:30 [DBG] Secret id found: ro.client1
2019-07-02 21:34:29.671 +04:30 [DBG] ro.client1 found in database: false
2019-07-02 21:34:29.678 +04:30 [ERR] No client with id 'ro.client1' found. aborting
2019-07-02 21:34:51.001 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:34:51.001 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:34:51.002 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:34:51.002 +04:30 [DBG] Start discovery request
2019-07-02 21:34:51.236 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:34:51.492 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:34:51.503 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:34:51.503 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:34:51.503 +04:30 [DBG] Start key discovery request
2019-07-02 21:34:51.794 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:34:51.794 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:34:51.794 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:34:51.794 +04:30 [DBG] Start discovery request
2019-07-02 21:34:52.048 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:34:52.107 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:34:52.107 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:34:52.107 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:34:52.108 +04:30 [DBG] Start key discovery request
2019-07-02 21:34:52.173 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:34:52.174 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:34:52.175 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:34:52.175 +04:30 [DBG] Start token request.
2019-07-02 21:34:52.175 +04:30 [DBG] Start client validation
2019-07-02 21:34:52.175 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:34:52.182 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:34:52.198 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:34:52.198 +04:30 [DBG] Secret id found: client
2019-07-02 21:34:52.726 +04:30 [DBG] client found in database: true
2019-07-02 21:34:52.737 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 21:34:52.748 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:34:52.748 +04:30 [DBG] Client validation success
2019-07-02 21:34:52.761 +04:30 [DBG] Start token request validation
2019-07-02 21:34:52.771 +04:30 [DBG] Start client credentials token request validation
2019-07-02 21:34:52.856 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:34:53.115 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:34:53.168 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:34:53.369 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:34:53.374 +04:30 [DBG] client credentials token request validation success
2019-07-02 21:34:53.391 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:34:53.425 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 21:34:53.501 +04:30 [DBG] Token request success.
2019-07-02 21:34:53.582 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:34:53.583 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:34:53.584 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:34:53.584 +04:30 [DBG] Start token request.
2019-07-02 21:34:53.584 +04:30 [DBG] Start client validation
2019-07-02 21:34:53.584 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:34:53.584 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:34:53.585 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:34:53.585 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:34:53.915 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:34:53.916 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:34:53.916 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:34:53.916 +04:30 [DBG] Client validation success
2019-07-02 21:34:53.916 +04:30 [DBG] Start token request validation
2019-07-02 21:34:53.927 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:34:53.962 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:34:54.173 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:34:54.173 +04:30 [ERR] Requested scope not allowed: api1
2019-07-02 21:34:54.175 +04:30 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:35:17.743 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:35:17.824 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:35:17.824 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:35:17.824 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:35:17.824 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:35:17.825 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:35:17.825 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:35:18.187 +04:30 [DBG] Starting grant removal
2019-07-02 21:35:18.766 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:35:18.771 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:35:18.771 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:35:18.771 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:35:18.771 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:35:18.772 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:35:18.772 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:35:44.690 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:35:44.698 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:35:44.699 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:35:44.705 +04:30 [DBG] Start discovery request
2019-07-02 21:35:45.919 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:35:46.175 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:35:46.177 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:35:46.177 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:35:46.184 +04:30 [DBG] Start key discovery request
2019-07-02 21:35:48.160 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:35:48.171 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:35:48.171 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:35:48.184 +04:30 [DBG] Start token request.
2019-07-02 21:35:48.193 +04:30 [DBG] Start client validation
2019-07-02 21:35:48.204 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:35:48.205 +04:30 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-07-02 21:35:48.205 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:35:48.944 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:35:48.958 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:35:48.973 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:35:48.973 +04:30 [DBG] Client validation success
2019-07-02 21:35:49.011 +04:30 [DBG] Start token request validation
2019-07-02 21:35:49.030 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:35:49.146 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:35:49.455 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:35:49.460 +04:30 [ERR] Requested scope not allowed: Api1
2019-07-02 21:35:49.476 +04:30 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"alice","password":"***REDACTED***","scope":"Api1"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:41:08.849 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:41:08.913 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:41:08.913 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:41:08.913 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:41:08.913 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:41:08.913 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:41:08.914 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:41:09.009 +04:30 [DBG] Starting grant removal
2019-07-02 21:41:09.241 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:41:09.243 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:41:09.243 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:41:09.243 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:41:09.243 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:41:09.243 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:41:09.244 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:42:51.489 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:42:51.600 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:42:51.600 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:42:51.600 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:42:51.600 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:42:51.600 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:42:51.601 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:42:51.813 +04:30 [DBG] Starting grant removal
2019-07-02 21:42:52.284 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:42:52.287 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:42:52.287 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:42:52.288 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:42:52.289 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:42:52.289 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:42:52.289 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:45:03.137 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:45:03.144 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:45:03.144 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:45:03.150 +04:30 [DBG] Start discovery request
2019-07-02 21:45:03.848 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:45:04.078 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:45:04.079 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:45:04.079 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:45:04.092 +04:30 [DBG] Start key discovery request
2019-07-02 21:45:06.983 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:45:06.991 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:45:06.991 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:45:07.001 +04:30 [DBG] Start token request.
2019-07-02 21:45:07.009 +04:30 [DBG] Start client validation
2019-07-02 21:45:07.016 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:45:07.018 +04:30 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-07-02 21:45:07.018 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:45:07.595 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:45:07.609 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:45:07.621 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:45:07.621 +04:30 [DBG] Client validation success
2019-07-02 21:45:07.657 +04:30 [DBG] Start token request validation
2019-07-02 21:45:07.677 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:45:07.770 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:45:08.044 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:45:08.047 +04:30 [ERR] Requested scope not allowed: Api1
2019-07-02 21:45:08.062 +04:30 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"alice","password":"***REDACTED***","scope":"Api1"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:47:39.054 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:47:39.166 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:47:39.167 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:47:39.167 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:47:39.167 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:47:39.167 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:47:39.168 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:47:39.369 +04:30 [DBG] Starting grant removal
2019-07-02 21:47:39.811 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:47:39.814 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:47:39.814 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:47:39.815 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:47:39.815 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:47:39.815 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:47:39.815 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:48:12.633 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:48:12.641 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:48:12.641 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:48:12.649 +04:30 [DBG] Start discovery request
2019-07-02 21:48:13.304 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:48:13.461 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:48:13.461 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:48:13.462 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:48:13.466 +04:30 [DBG] Start key discovery request
2019-07-02 21:48:15.325 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:48:15.333 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:48:15.333 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:48:15.344 +04:30 [DBG] Start token request.
2019-07-02 21:48:15.354 +04:30 [DBG] Start client validation
2019-07-02 21:48:15.362 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:48:15.362 +04:30 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-07-02 21:48:15.363 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:48:15.932 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:48:15.942 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:48:15.953 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:48:15.954 +04:30 [DBG] Client validation success
2019-07-02 21:48:15.985 +04:30 [DBG] Start token request validation
2019-07-02 21:48:16.005 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:48:16.109 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:48:16.402 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:48:16.406 +04:30 [ERR] Requested scope not allowed: Api1
2019-07-02 21:48:16.421 +04:30 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"alice","password":"***REDACTED***","scope":"Api1"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:51:14.014 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:51:14.014 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:51:14.015 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:51:14.015 +04:30 [DBG] Start discovery request
2019-07-02 21:51:14.249 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:51:14.394 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:51:14.395 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:51:14.395 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:51:14.395 +04:30 [DBG] Start key discovery request
2019-07-02 21:51:14.601 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:51:14.601 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:51:14.601 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:51:14.601 +04:30 [DBG] Start discovery request
2019-07-02 21:51:14.894 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:51:14.910 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:51:14.910 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:51:14.910 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:51:14.910 +04:30 [DBG] Start key discovery request
2019-07-02 21:51:14.924 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:51:14.926 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:51:14.926 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:51:14.927 +04:30 [DBG] Start token request.
2019-07-02 21:51:14.927 +04:30 [DBG] Start client validation
2019-07-02 21:51:14.927 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:51:14.935 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:51:14.941 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:51:14.941 +04:30 [DBG] Secret id found: client
2019-07-02 21:51:15.326 +04:30 [DBG] client found in database: true
2019-07-02 21:51:15.326 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 21:51:15.326 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:51:15.326 +04:30 [DBG] Client validation success
2019-07-02 21:51:15.326 +04:30 [DBG] Start token request validation
2019-07-02 21:51:15.332 +04:30 [DBG] Start client credentials token request validation
2019-07-02 21:51:15.378 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:51:15.602 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:51:15.644 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:51:15.860 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:51:15.864 +04:30 [DBG] client credentials token request validation success
2019-07-02 21:51:15.866 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:51:15.893 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 21:51:15.978 +04:30 [DBG] Token request success.
2019-07-02 21:51:16.010 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:51:16.010 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:51:16.010 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:51:16.011 +04:30 [DBG] Start token request.
2019-07-02 21:51:16.011 +04:30 [DBG] Start client validation
2019-07-02 21:51:16.011 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:51:16.011 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:51:16.012 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:51:16.012 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:51:16.438 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:51:16.438 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:51:16.438 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:51:16.438 +04:30 [DBG] Client validation success
2019-07-02 21:51:16.438 +04:30 [DBG] Start token request validation
2019-07-02 21:51:16.438 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:51:16.472 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:51:16.676 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:51:16.708 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:51:16.908 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:51:36.134 +04:30 [DBG] Resource owner password token request validation success.
2019-07-02 21:51:36.143 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:51:36.145 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-02 21:51:36.145 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-02 21:51:44.622 +04:30 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2019-07-02 21:51:44.656 +04:30 [DBG] Token request success.
2019-07-02 21:52:45.885 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:52:45.967 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:52:45.967 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:52:45.967 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:52:45.967 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:52:45.968 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:52:45.968 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:52:46.144 +04:30 [DBG] Starting grant removal
2019-07-02 21:52:46.795 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:52:46.799 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:52:46.799 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:52:46.799 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:52:46.799 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:52:46.799 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:52:46.799 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:53:05.040 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:53:05.047 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:53:05.047 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:53:05.052 +04:30 [DBG] Start discovery request
2019-07-02 21:53:06.248 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:53:06.475 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:53:06.476 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:53:06.476 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:53:06.481 +04:30 [DBG] Start key discovery request
2019-07-02 21:53:08.955 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:53:08.963 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:53:08.963 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:53:08.973 +04:30 [DBG] Start token request.
2019-07-02 21:53:08.986 +04:30 [DBG] Start client validation
2019-07-02 21:53:08.995 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:53:09.003 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:53:09.024 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:53:09.024 +04:30 [DBG] Secret id found: client
2019-07-02 21:53:09.826 +04:30 [DBG] client found in database: true
2019-07-02 21:53:09.840 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 21:53:09.855 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:53:09.855 +04:30 [DBG] Client validation success
2019-07-02 21:53:09.869 +04:30 [DBG] Start token request validation
2019-07-02 21:53:09.880 +04:30 [DBG] Start client credentials token request validation
2019-07-02 21:53:09.978 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:53:10.263 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:53:10.307 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:53:10.500 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:53:10.504 +04:30 [DBG] client credentials token request validation success
2019-07-02 21:53:10.519 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:53:10.555 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 21:53:10.634 +04:30 [DBG] Token request success.
2019-07-02 21:53:19.975 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:53:19.976 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:53:19.976 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:53:19.976 +04:30 [DBG] Start token request.
2019-07-02 21:53:19.977 +04:30 [DBG] Start client validation
2019-07-02 21:53:19.977 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:53:19.977 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:53:19.977 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:53:19.978 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:53:20.331 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:53:20.331 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:53:20.331 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:53:20.331 +04:30 [DBG] Client validation success
2019-07-02 21:53:20.331 +04:30 [DBG] Start token request validation
2019-07-02 21:53:20.345 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:53:20.386 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:53:20.593 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:53:20.624 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:53:20.840 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:53:23.920 +04:30 [DBG] Resource owner password token request validation success.
2019-07-02 21:53:23.927 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:53:23.929 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-02 21:53:23.929 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-02 21:53:26.167 +04:30 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2019-07-02 21:53:26.177 +04:30 [DBG] Token request success.
2019-07-02 21:53:26.558 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:53:26.558 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:53:26.558 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:53:26.559 +04:30 [DBG] Start discovery request
2019-07-02 21:53:26.803 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:53:27.041 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:53:27.041 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:53:27.041 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:53:27.041 +04:30 [DBG] Start key discovery request
2019-07-02 21:54:32.673 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 21:54:32.754 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 21:54:32.754 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 21:54:32.754 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 21:54:32.754 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 21:54:32.754 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 21:54:32.754 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 21:54:32.949 +04:30 [DBG] Starting grant removal
2019-07-02 21:54:33.285 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 21:54:33.288 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 21:54:33.288 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 21:54:33.288 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 21:54:33.288 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 21:54:33.288 +04:30 [DBG] Error Url: /home/error
2019-07-02 21:54:33.288 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 21:54:53.271 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:54:53.276 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:54:53.277 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:54:53.282 +04:30 [DBG] Start discovery request
2019-07-02 21:54:54.398 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:54:54.556 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:54:54.556 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:54:54.557 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:54:54.561 +04:30 [DBG] Start key discovery request
2019-07-02 21:54:54.943 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:54:54.952 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:54:54.952 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:54:54.963 +04:30 [DBG] Start token request.
2019-07-02 21:54:54.971 +04:30 [DBG] Start client validation
2019-07-02 21:54:54.978 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:54:54.983 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:54:55.003 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:54:55.003 +04:30 [DBG] Secret id found: client
2019-07-02 21:54:55.793 +04:30 [DBG] client found in database: true
2019-07-02 21:54:55.804 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 21:54:55.815 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:54:55.815 +04:30 [DBG] Client validation success
2019-07-02 21:54:55.827 +04:30 [DBG] Start token request validation
2019-07-02 21:54:55.838 +04:30 [DBG] Start client credentials token request validation
2019-07-02 21:54:55.923 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:54:56.195 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:54:56.240 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:54:56.448 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:54:56.452 +04:30 [DBG] client credentials token request validation success
2019-07-02 21:54:56.468 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:54:56.501 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 21:54:56.583 +04:30 [DBG] Token request success.
2019-07-02 21:54:56.622 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 21:54:56.623 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 21:54:56.623 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 21:54:56.624 +04:30 [DBG] Start token request.
2019-07-02 21:54:56.624 +04:30 [DBG] Start client validation
2019-07-02 21:54:56.624 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 21:54:56.624 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 21:54:56.625 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 21:54:56.625 +04:30 [DBG] Secret id found: ro.client
2019-07-02 21:54:56.960 +04:30 [DBG] ro.client found in database: true
2019-07-02 21:54:56.960 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 21:54:56.960 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 21:54:56.960 +04:30 [DBG] Client validation success
2019-07-02 21:54:56.960 +04:30 [DBG] Start token request validation
2019-07-02 21:54:56.973 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 21:54:57.022 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:54:57.227 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:54:57.259 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 21:54:57.455 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 21:54:59.595 +04:30 [DBG] Resource owner password token request validation success.
2019-07-02 21:54:59.596 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 21:54:59.597 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-02 21:54:59.598 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-02 21:55:00.726 +04:30 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2019-07-02 21:55:00.734 +04:30 [DBG] Token request success.
2019-07-02 21:55:01.055 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 21:55:01.055 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 21:55:01.055 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 21:55:01.056 +04:30 [DBG] Start discovery request
2019-07-02 21:55:01.294 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 21:55:01.485 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 21:55:01.486 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 21:55:01.486 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 21:55:01.486 +04:30 [DBG] Start key discovery request
2019-07-02 22:07:51.839 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 22:07:51.911 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 22:07:51.912 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 22:07:51.912 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 22:07:51.912 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 22:07:51.912 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 22:07:51.912 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 22:07:52.104 +04:30 [DBG] Starting grant removal
2019-07-02 22:07:52.461 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 22:07:52.464 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 22:07:52.464 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 22:07:52.465 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 22:07:52.465 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 22:07:52.465 +04:30 [DBG] Error Url: /home/error
2019-07-02 22:07:52.465 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 22:08:08.567 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 22:08:08.574 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 22:08:08.575 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 22:08:08.582 +04:30 [DBG] Start discovery request
2019-07-02 22:08:09.708 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 22:08:09.992 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 22:08:09.993 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 22:08:09.994 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 22:08:09.999 +04:30 [DBG] Start key discovery request
2019-07-02 22:08:10.446 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 22:08:10.453 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 22:08:10.454 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 22:08:10.465 +04:30 [DBG] Start token request.
2019-07-02 22:08:10.475 +04:30 [DBG] Start client validation
2019-07-02 22:08:10.483 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 22:08:10.488 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 22:08:10.510 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 22:08:10.510 +04:30 [DBG] Secret id found: client
2019-07-02 22:08:11.305 +04:30 [DBG] client found in database: true
2019-07-02 22:08:11.323 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 22:08:11.339 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 22:08:11.339 +04:30 [DBG] Client validation success
2019-07-02 22:08:11.352 +04:30 [DBG] Start token request validation
2019-07-02 22:08:11.363 +04:30 [DBG] Start client credentials token request validation
2019-07-02 22:08:11.457 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:08:11.764 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:08:11.816 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:08:12.033 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:08:12.037 +04:30 [DBG] client credentials token request validation success
2019-07-02 22:08:12.053 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 22:08:12.085 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 22:08:12.172 +04:30 [DBG] Token request success.
2019-07-02 22:08:12.258 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 22:08:12.259 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 22:08:12.259 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 22:08:12.259 +04:30 [DBG] Start token request.
2019-07-02 22:08:12.259 +04:30 [DBG] Start client validation
2019-07-02 22:08:12.260 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 22:08:12.260 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 22:08:12.261 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 22:08:12.261 +04:30 [DBG] Secret id found: ro.client
2019-07-02 22:08:12.596 +04:30 [DBG] ro.client found in database: true
2019-07-02 22:08:12.597 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 22:08:12.597 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 22:08:12.598 +04:30 [DBG] Client validation success
2019-07-02 22:08:12.598 +04:30 [DBG] Start token request validation
2019-07-02 22:08:12.609 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 22:08:12.651 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:08:12.884 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:08:12.914 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:08:13.110 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:08:17.811 +04:30 [DBG] Resource owner password token request validation success.
2019-07-02 22:08:17.812 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 22:08:17.814 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-02 22:08:17.814 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-02 22:08:17.824 +04:30 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2019-07-02 22:08:17.833 +04:30 [DBG] Token request success.
2019-07-02 22:23:25.602 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 22:23:25.709 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 22:23:25.710 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 22:23:25.710 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 22:23:25.710 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 22:23:25.710 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 22:23:25.710 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 22:23:25.923 +04:30 [DBG] Starting grant removal
2019-07-02 22:23:26.519 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 22:23:26.524 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 22:23:26.525 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 22:23:26.525 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 22:23:26.525 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 22:23:26.525 +04:30 [DBG] Error Url: /home/error
2019-07-02 22:23:26.525 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 22:24:14.115 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 22:24:14.223 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 22:24:14.224 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 22:24:14.224 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 22:24:14.224 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 22:24:14.224 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 22:24:14.224 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 22:24:14.498 +04:30 [DBG] Starting grant removal
2019-07-02 22:24:15.076 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 22:24:15.079 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 22:24:15.080 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 22:24:15.080 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 22:24:15.080 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 22:24:15.080 +04:30 [DBG] Error Url: /home/error
2019-07-02 22:24:15.080 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 22:25:17.879 +04:30 [INF] Starting IdentityServer4 version 2.3.2.0
2019-07-02 22:25:17.969 +04:30 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-02 22:25:17.969 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-02 22:25:17.969 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-02 22:25:17.969 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-02 22:25:17.969 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-02 22:25:17.970 +04:30 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-02 22:25:18.203 +04:30 [DBG] Starting grant removal
2019-07-02 22:25:18.745 +04:30 [DBG] Login Url: /Account/Login
2019-07-02 22:25:18.748 +04:30 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 22:25:18.748 +04:30 [DBG] Logout Url: /Account/Logout
2019-07-02 22:25:18.748 +04:30 [DBG] ConsentUrl Url: /consent
2019-07-02 22:25:18.748 +04:30 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 22:25:18.748 +04:30 [DBG] Error Url: /home/error
2019-07-02 22:25:18.749 +04:30 [DBG] Error Id Parameter: errorId
2019-07-02 22:25:31.121 +04:30 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 22:25:31.131 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 22:25:31.132 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 22:25:31.139 +04:30 [DBG] Start discovery request
2019-07-02 22:25:32.402 +04:30 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-07-02 22:25:32.660 +04:30 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 22:25:32.661 +04:30 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 22:25:32.661 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 22:25:32.666 +04:30 [DBG] Start key discovery request
2019-07-02 22:25:34.209 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 22:25:34.220 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 22:25:34.221 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 22:25:34.234 +04:30 [DBG] Start token request.
2019-07-02 22:25:34.242 +04:30 [DBG] Start client validation
2019-07-02 22:25:34.254 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 22:25:34.259 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 22:25:34.279 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 22:25:34.280 +04:30 [DBG] Secret id found: client
2019-07-02 22:25:35.011 +04:30 [DBG] client found in database: true
2019-07-02 22:25:35.022 +04:30 [DBG] client configuration validation for client client succeeded.
2019-07-02 22:25:35.033 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 22:25:35.033 +04:30 [DBG] Client validation success
2019-07-02 22:25:35.045 +04:30 [DBG] Start token request validation
2019-07-02 22:25:35.091 +04:30 [DBG] Start client credentials token request validation
2019-07-02 22:25:35.240 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:25:35.533 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:25:35.584 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:25:35.790 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:25:35.794 +04:30 [DBG] client credentials token request validation success
2019-07-02 22:25:35.810 +04:30 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 22:25:35.846 +04:30 [DBG] Getting claims for access token for client: client
2019-07-02 22:25:35.923 +04:30 [DBG] Token request success.
2019-07-02 22:25:37.530 +04:30 [DBG] Request path /connect/token matched to endpoint type Token
2019-07-02 22:25:37.531 +04:30 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-07-02 22:25:37.531 +04:30 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-07-02 22:25:37.531 +04:30 [DBG] Start token request.
2019-07-02 22:25:37.531 +04:30 [DBG] Start client validation
2019-07-02 22:25:37.532 +04:30 [DBG] Start parsing Basic Authentication secret
2019-07-02 22:25:37.532 +04:30 [DBG] Start parsing for secret in post body
2019-07-02 22:25:37.565 +04:30 [DBG] Parser found secret: PostBodySecretParser
2019-07-02 22:25:37.565 +04:30 [DBG] Secret id found: ro.client
2019-07-02 22:25:37.855 +04:30 [DBG] ro.client found in database: true
2019-07-02 22:25:37.855 +04:30 [DBG] client configuration validation for client ro.client succeeded.
2019-07-02 22:25:37.855 +04:30 [DBG] Secret validator success: HashedSharedSecretValidator
2019-07-02 22:25:37.855 +04:30 [DBG] Client validation success
2019-07-02 22:25:37.858 +04:30 [DBG] Start token request validation
2019-07-02 22:25:37.869 +04:30 [DBG] Start resource owner password token request validation
2019-07-02 22:25:37.905 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:25:38.071 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:25:38.097 +04:30 [DBG] Found [] identity scopes in database
2019-07-02 22:25:38.256 +04:30 [DBG] Found ["api1"] API scopes in database
2019-07-02 22:25:38.263 +04:30 [DBG] Resource owner password token request validation success.
2019-07-02 22:25:38.263 +04:30 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-07-02 22:25:38.264 +04:30 [DBG] Getting claims for access token for client: ro.client
2019-07-02 22:25:38.264 +04:30 [DBG] Getting claims for access token for subject: 1
2019-07-02 22:25:38.271 +04:30 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2019-07-02 22:25:38.277 +04:30 [DBG] Token request success.
